# lmq

```
基于go实现的轻量级消息队列
```

### 一：三个维度管理消息

1. 平台级别，可以认为是一个站点
2. 模块级别，一个平台可以有多个模块
3. 消息，消息属于指定模块，一个模块中的消息构成一个队列

### 二：消息的存储

* 平台和模块存储

> 一个平台一个.json文件，文件名即为平台名称，文件存平台的模块信息，通过钩子实现平台/模块的新增和删除

* 消息存储

> 消息采用文件存储，没有使用mysql，三个文件实现消息的存储：1自增id，2索引，3消息内容；

* 使用文件存储的优点：

> 1. 文件存储更符合消息队列的特点
> 2. 本地存储速度更快，无需跨网络拿数据
> 3. 1000W数据一个表，实现自动分表
> 4. 索引常驻内存，每条索引固定长度，根据索引id，O\(1\)时间内拿到索引信息，索引中存了消息在文件中的偏移量和长度，O\(1\)时间内拿到消息内容，不存在扫表的动作，就是快





